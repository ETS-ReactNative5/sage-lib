<%
css_active_class = "sage-choice--active" 
is_button = !component.attributes&.has_key?(:href)
html_tag = is_button ? (component.content.present? ? "div" : "button") : "a"
%>

<<%= html_tag %>
  <%= "type=button" if is_button and !component.content.present? %>
  <%= "role=button" if is_button and component.content.present? %>
  <% component.attributes.each do |key, value| %>
    <%= "#{key}='#{value}'".html_safe %>
  <% end if component.attributes&.is_a?(Hash) %>
  <% if component.disabled %>
    <%= is_button ? "disabled" : "aria-disabled=true" %>
  <% end %>
  class="
    sage-choice
    <%= css_active_class if component.active %>
    <% if component.type.present? %>
      <% if component.type == "icon" && component.icon.present? %>
        <%= "sage-choice--icon-#{component.icon}" %>
      <% else %>
        <%= "sage-choice--#{component.type}" %>
      <% end %>
    <% end %>
    <%= "sage-choice--align-center" if component.align_center.present? && component.align_center == true %>
  "
  data-js-tabs-target="<%= component.target %>"
  data-sage-active-class="<%= css_active_class %>"
  role="tab"
  aria-controls="<%= component.target %>"
>
  <% if component.graphic.present? %>
    <div class="sage-choice__graphic">
      <%= component.graphic.html_safe %>
    </div>
  <% end %>
  <div class="sage-choice__content <%= "sage-choice__content--custom" if component.content.present? %>">
    <% if component.text.present? %>
      <em class="sage-choice__text"><%= component.text.html_safe %></em>
    <% end %>
    <% if component.subtext.present? %>
      <span class="sage-choice__subtext" aria-hidden="true"><%= component.subtext.html_safe %></span>
    <% end %>
    <%= component.content if component.content.present? %>
  </div>
  <% if component.link_text.present? %>
    <div class="sage-choice__link-text">
      <%= component.link_text.html_safe %>
    </div>
  <% end %>
</<%= html_tag %>>
